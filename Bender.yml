package:
  name: pulpissimo
  authors:
    - "Robert Balas <balasr@iis.ee.ethz.ch>"
    - "Manuel Eggimann <meggiman@iis.ee.ethz.ch>"
    - "Pasquale Davide Schiavone <pschiavo@iis.ee.ethz.ch>"
    - "Germain Haugou <haugoug@iis.ee.ethz.ch>"
    - "Francesco Conti <f.conti@unibo.it>"
    - "Pirmin Vogel <vogelpi@lowrisc.org>"
    - "Stefan Mach <smach@iis.ee.ethz.ch>"
    - "Antonio Pullini <pullinia@iis.ee.ethz.ch>"
    - "Gianmarco Ottavi <gianmarco.ottavi@studio.unibo.it>"
    - "Luca Valente <luca.valente2@unibo.it>"

dependencies:
  common_cells:                { git: "https://github.com/pulp-platform/common_cells.git",       version: 1.21.0 }
  apb:                         { git: "https://github.com/pulp-platform/apb.git",                rev: "bb7b49a0a10c375ae3e05fa4756071eb964f0274" } # Point to open PR #8 (needed for the apb_demux and apb_err_slv IP)
  jtag_pulp:                   { git: "https://github.com/pulp-platform/jtag_pulp.git",          version: 0.2.0 }
  pulp_soc:                    { git: "https://github.com/pulp-platform/pulp_soc.git",           rev: v5.0.0-draft }
  tbtools:                     { git: "https://github.com/pulp-platform/tbtools.git",            version: 0.2.1 }
  tech_cells_generic:          { git: "https://github.com/pulp-platform/tech_cells_generic.git", version: 0.2.3 }
  pulpissimo_padframe_rtl_sim: { path: "rtl/pulpissimo/padframe/pulpissimo_padframe_rtl_sim_autogen" }
  register_interface:          { git: "https://github.com/pulp-platform/register_interface.git", version: 0.3.2 }
  generic_FLL:                 { git: "https://github.com/pulp-platform/generic_FLL.git",        version: 0.2.0 }
  apb_fll_if:                  { git: "https://github.com/pulp-platform/apb_fll_if.git",         version: 0.2.0 }


  # Target Specific Dependencies
  

  # Simulation Environment specific dependencies
  vips:                        { path: "verification/sim/vip/generic"}
  rtl_sim_tb:                  { path: "verification/sim/tb/generic"}


export_include_dirs:
  - hw/common/rtl/includes

# The default flavor of PULPIssimo is the generic version for RTL simulation.
# For other target platforms, checkout the Bender.yml files in the various
# subdirectories bellow 'hw'.
sources:
  # Source files grouped in levels. Files in level 0 have no dependencies on files in this
  # package. Files in level 1 only depend on files in level 0, files in level 2 on files in
  # levels 1 and 0, etc. Files within a level are ordered alphabetically.
  # Level 0

  # Common RTL files
  - hw/common/rtl/soc_domain.sv
  - hw/common/rtl/pulpissimo.sv


  # rtl_sim - Generic version of pulpissimo used for non-verilator RTL simulation 
  - target: all(rtl_sim, not(verilator))
    files:
      - hw/common/rtl/padframe/padframe_adapter.sv
      - hw/common/rtl/clock_gen_generic.sv


  # TB sources
  - target: any(test,simulation)
    files:
      - rtl/tb/riscv_pkg.sv
      - rtl/tb/jtag_pkg.sv
      - rtl/tb/pulp_tap_pkg.sv
      - rtl/tb/srec/srec_pkg.sv
      - rtl/tb/tb_clk_gen.sv
      - rtl/tb/tb_pulp.sv
      - rtl/tb/SimJTAG.sv
      - rtl/tb/SimDTM.sv


vendor_package:
  # Import the GPIO repository directly. Since we have to regenerate the RTL
  # when we change the number GPIOs we cannot just depend on it as a regular
  # dependency but actually need a modifyable copy in the source tree.
  - name: gpio
    target_dir: vendored_ips/gpio
    upstream: { git: "https://github.com/pulp-platform/gpio.git", rev: "3908df6e81d5a3f7be021e521f22d8d4a7fa6e34"}
    patch_dir: vendored_ips/patches/gpio
